<!doctype html>
<html>
<head>
 <style>
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500&family=Quicksand:wght@700&display=swap');
@import url("style.css")
</style> 
<script>
var context = new AudioContext()

var ar = {
    '0': {
        'name': '1',
        'f1':700,
        'f2':900
    },
    '1': {
        'name': '2',
        'f1':700,
        'f2':1100
    },
    '2': {
        'name': '3',
        'f1':900,
        'f2':1100
    },
    '3': {
        'name': '4',
        'f1':700,
        'f2':1300,
        'br':true,
    },
    '4': {
        'name': '5',
        'f1':900,
        'f2':1300
    },
    '5': {
        'name': '6',
        'f1':1100,
        'f2':1300
    },
    '6': {
        'name': '7',
        'f1':700,
        'f2':1500,
        'br':true
    },
    '7': {
        'name': '8',
        'f1':900,
        'f2':1500
    },
    '8': {
        'name': '9',
        'f1':1100,
        'f2':1500
    },
    '9': {
        'name': '0',
        'f1':1300,
        'f2':1500,
        'br':true
    },
}

function keypress(key) {
    if (key.playing) return
    context.resume()
    key.osc1 = context.createOscillator()
    key.osc1.frequency.value = ar[key.keyname].f1
    key.g1 = context.createGain()
    key.osc1.connect(key.g1)
    key.osc2 = context.createOscillator()
    key.osc2.frequency.value = ar[key.keyname].f2
    key.g2 = context.createGain()
    key.osc2.connect(key.g2)
    key.g1.connect(context.destination)
    key.g2.connect(context.destination)
    key.osc1.start()
    key.osc2.start()
    key.playing = true
}

function keyup(key) {
    if (!key.playing) return
    context.resume()
    key.osc1.stop()
    key.osc2.stop()
    key.playing = false
}


function boot() {
    var div = document.getElementById('keys')
    var key = document.createElement('button')
    key.className = 'key'
    for(var kd in ar) {
        var k = key.cloneNode()
        k.textContent = ar[kd].name
        if (ar[kd].br) {
            k.className += ' br'
        }
        k.onmousedown = (event) => {keypress(event.target)};
        k.onmouseup = (event) => {keyup(event.target)};
        k.playing = false;
        k.keyname = kd
        div.appendChild(k)
    }
}

</script>
</head>
<body onload="boot()">
<div id="keys" style="display:block">
</body>
</html>
